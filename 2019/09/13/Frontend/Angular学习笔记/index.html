<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Angular学习笔记 - Shiyu - Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Shiyu - Blog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Shiyu - Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Angular笔记 Basics  Angular的Component可以反复使用也可以使用在其他Component中， Angular有一个根Component叫做&amp;lt;app-root&amp;gt;&amp;lt;&amp;#x2F;app-root&amp;gt;，其他我们生成的Component都需要在该Component内部  可以手动生成Component，**但不要忘记在app.modules.ts的declaratio"><meta property="og:type" content="blog"><meta property="og:title" content="Angular学习笔记"><meta property="og:url" content="https://shiyuliucolumbia.github.io/2019/09/13/Frontend/Angular%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><meta property="og:site_name" content="Shiyu - Blog"><meta property="og:description" content="Angular笔记 Basics  Angular的Component可以反复使用也可以使用在其他Component中， Angular有一个根Component叫做&amp;lt;app-root&amp;gt;&amp;lt;&amp;#x2F;app-root&amp;gt;，其他我们生成的Component都需要在该Component内部  可以手动生成Component，**但不要忘记在app.modules.ts的declaratio"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://img-blog.csdnimg.cn/20190625142031754.jpg"><meta property="og:image" content="https://img-blog.csdnimg.cn/20190625143358768.jpg"><meta property="og:image" content="https://img-blog.csdnimg.cn/20190625150849439.jpg"><meta property="og:image" content="https://img-blog.csdnimg.cn/20190625150942222.jpg"><meta property="og:image" content="https://img-blog.csdnimg.cn/20190628094921312.jpg"><meta property="og:image" content="https://img-blog.csdnimg.cn/2019062814094743.jpg"><meta property="og:image" content="https://img-blog.csdnimg.cn/20190628171159909.jpg"><meta property="article:published_time" content="2019-09-13T16:27:24.000Z"><meta property="article:modified_time" content="2021-11-12T15:14:27.504Z"><meta property="article:author" content="Shiyu Liu"><meta property="article:tag" content="Angular"><meta property="article:tag" content="Javascript"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://img-blog.csdnimg.cn/20190625142031754.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://shiyuliucolumbia.github.io/2019/09/13/Frontend/Angular%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},"headline":"Angular学习笔记","image":["https://img-blog.csdnimg.cn/20190625142031754.jpg","https://img-blog.csdnimg.cn/20190625143358768.jpg","https://img-blog.csdnimg.cn/20190625150849439.jpg","https://img-blog.csdnimg.cn/20190625150942222.jpg","https://img-blog.csdnimg.cn/20190628094921312.jpg","https://img-blog.csdnimg.cn/2019062814094743.jpg","https://img-blog.csdnimg.cn/20190628171159909.jpg"],"datePublished":"2019-09-13T16:27:24.000Z","dateModified":"2021-11-12T15:14:27.504Z","author":{"@type":"Person","name":"Shiyu Liu"},"publisher":{"@type":"Organization","name":"Shiyu - Blog","logo":{"@type":"ImageObject","url":{"text":"Shiyu - Blog"}}},"description":"Angular笔记 Basics  Angular的Component可以反复使用也可以使用在其他Component中， Angular有一个根Component叫做&lt;app-root&gt;&lt;&#x2F;app-root&gt;，其他我们生成的Component都需要在该Component内部  可以手动生成Component，**但不要忘记在app.modules.ts的declaratio"}</script><link rel="canonical" href="https://shiyuliucolumbia.github.io/2019/09/13/Frontend/Angular%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Shiyu - Blog</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-9-tablet is-9-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2019-09-13T16:27:24.000Z" title="9/13/2019, 11:27:24 AM">2019-09-13</time></span><span class="level-item">Updated&nbsp;<time dateTime="2021-11-12T15:14:27.504Z" title="11/12/2021, 9:14:27 AM">2021-11-12</time></span><span class="level-item"><a class="link-muted" href="/categories/Frontend/">Frontend</a></span><span class="level-item">37 minutes read (About 5591 words)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>&nbsp;visits</span></div></div><h1 class="title is-3 is-size-4-mobile">Angular学习笔记</h1><div class="content"><p>Angular笔记</p>
<h1 id="Basics"><a href="#Basics" class="headerlink" title="Basics"></a>Basics</h1><ol>
<li><p> Angular的Component可以反复使用也可以使用在其他Component中， Angular有一个根Component叫做<code>&lt;app-root&gt;&lt;/app-root&gt;</code>，其他我们生成的Component都需要在该Component内部</p>
</li>
<li><p>可以手动生成Component，**但不要忘记在app.modules.ts的declarations中声明(类似于spring中对Component的scan)**；也可以用ng generate component<code>&lt;name&gt;</code> 自动生成，则不再需要手动添加声明(确保ng serve在运行)。</p>
</li>
</ol>
<span id="more"></span>

<ol start="3">
<li>@Component指明了该组件的配置情况，其中templateUrl指定了该组件的内容(可以不用templateUrl而是使用template，那么此时是在typescript文件中直接写html)，styleUrls和styles起着相同的作用，唯一的区别是style可以有多个css文件。selector很像css的selector，不止可以做为选中元素，也可以做为选中属性( [<code>&lt;attribute&gt;</code>] )或者选中class ( [<code>.&lt;class&gt;</code>] ) <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component, OnInit &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line">@Component(&#123;</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;app-servers&#x27;</span>,</span><br><span class="line">  <span class="attr">templateUrl</span>: <span class="string">&#x27;./servers.component.html&#x27;</span>,</span><br><span class="line">  <span class="attr">styleUrls</span>: [<span class="string">&#x27;./servers.component.css&#x27;</span>]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">ServersComponent</span> <span class="title">implements</span> <span class="title">OnInit</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">ngOnInit</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Angular databinding的四种方式<br><img src="https://img-blog.csdnimg.cn/20190625142031754.jpg"></li>
</ol>
<pre><code>1. String Interpolation：&#123;&#123; &#125;&#125;写在html文件中，&#123;&#123; &#125;&#125;中间可以是typescript中声明的变量或函数，只要&#123;&#123; &#125;&#125;中间最后是一个String类型即可。 
2. Property Binding：改变某个元素的原生属性的值，比如将某个元素的disabled属性绑定到某个布尔变量上。
</code></pre>
<p><code>&lt;button class=&quot;btn btn-primary&quot; [disabled]=&quot;!allowNewServer&quot;&gt;&lt;/button&gt;</code><br>    3. Event Binding：当触发绑定的event(比如click event)后，会执行expression。<strong>一个很重要的预留关键词是<code>$event</code>，这个关键词代表的是触发该event产生的数据。比如我们可以监听input元素的input event，每当我们改变input元素的内容的时候，我们都可以拿到这个值。</strong><br><code>&lt;input class=&quot;form-control&quot; (input)=&quot;onUpdataServerName($event)&quot;&gt;</code><br>    4. Two Way Binding：typescript中变量的改变会改变template上的显示，template上的显示被手动改变也会改变typescript中变量的值。需要加入FormModule这个库。</p>
<ol start="5">
<li>Directives:组件是一个带模板的指令；@Component装饰器实际上就是一个@Directive装饰器，只是扩展了一些面向模板的特性。<br>一些angular内置的directives：带*号的是structural directives，structural directives会导致元素的增加或删除，普通的attribute directives不会造成元素的增加或删除，只会改变元素。</li>
</ol>
<p>*ngIf：如果判断为真，那么元素存在，如果判断为假，那么该元素不存在(注意与disabled属性的区别，disabled是指元素存在但不可见)。<code>&lt;p *ngIf=&quot;getServerStatus()&quot;&gt;&lt;/p&gt;</code><br>[ngStyle]：attribute directive，他本身是一个directive，我们使用的时候用Property Binding来动态的改变某个元素的style。<code>&lt;p [ngStyle]=&quot;&#123; backgroundColor: getColor() &#125;&quot;&gt;&lt;/p&gt;</code><br>语法格式是：冒号前面是style名字，冒号后面是一个String，代表该style的属性。<br>[ngClass]：动态增加css class。<code>&lt;p [ngClass]=&quot;&#123; Online: getServerStatus===&#39;online&#39; &#125; &quot;&gt;&lt;/p&gt;</code><br>语法格式是：冒号前面是我们css文件中的某个class，冒号后面是boolean值，可以是表达式或函数，如果boolean为真，那么在该元素上增加该class。<br>*ngFor：<code>&lt;p *ngFor=&quot;let server of servers; let i = index&quot;&gt;&#123;&#123; server &#125;&#125;&lt;/p&gt;</code><br>servers是我们定义的一个javascript array。index是ngFor预留的关键词，可以获取ngFor循环的index。i可以在这个元素中当做变量使用。</p>
<ol start="6">
<li><p>一个很重要的问题：两个Component之间如何进行数据的交互。<br>Custom Properties &amp; Events：<br><img src="https://img-blog.csdnimg.cn/20190625143358768.jpg" alt="在这里插入图片描述"><br>Native Properties &amp; Events指的是对已有元素的property进行绑定，比如disabled属性。<br>Custom Properties &amp; Events for Directives指的是类似*ngFor。<br>Custom Properties &amp; Event for Components 用于Component间的数据交互。</p>
<ul>
<li><p>父Component传入子Component</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">ServerElementComponent</span> <span class="title">implements</span> <span class="title">OnInit</span> </span>&#123;</span><br><span class="line">  @Input(<span class="string">&#x27;srvElement&#x27;</span>)</span><br><span class="line">  <span class="attr">element</span> : &#123;</span><br><span class="line">    <span class="attr">type</span>: string,</span><br><span class="line">    <span class="attr">name</span>: string,</span><br><span class="line">    <span class="attr">content</span>: string</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123; &#125;</span><br><span class="line">  <span class="function"><span class="title">ngOnInit</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  使用了input注解之后，我们再使用ServerElementComponent的时候就像之前我们使用disabled属性一样使用element属性了，所以也可以为其绑定数据。<code>&lt;app-server-element *ngFor=&quot;let serverElement of serverElements&quot; [srvElement]=&#39;serverElement&#39;&gt;&lt;/app-server-element&gt;</code><br>@Input(alias),如果我们想为property起一个别名，乐意在里面加一个alias，这时候使用的时候就必须要用这个alias。如果不加alias，那么使用的时候就是用他本来的名字(element)。</p>
</li>
<li><p>子Component发射event，父Component接受event(子Component向父Component传数据)<br>app.html. <code>&lt;app-cockpit (serverCreated)=&quot;onServerAdded($event)&quot; (blueprintCreated)=&quot;onBlueprintAdded($event)&quot;&gt;&lt;/app-cockpit&gt;</code></p>
<p>  app.ts</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> </span>&#123;</span><br><span class="line">  serverElements = [&#123;<span class="attr">type</span>:<span class="string">&#x27;server&#x27;</span>, <span class="attr">name</span>:<span class="string">&#x27;test&#x27;</span>, <span class="attr">content</span>:<span class="string">&#x27;test&#x27;</span>&#125;];</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">onServerAdded</span>(<span class="params">serverData:&#123;serverName: string, serverContent:string&#125;</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.serverElements.push(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;server&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: serverData.serverName,</span><br><span class="line">      <span class="attr">content</span>: serverData.serverContent</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">onBlueprintAdded</span>(<span class="params">serverData:&#123;serverName: string, serverContent:string&#125;</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.serverElements.push(&#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&#x27;blueprint&#x27;</span>,</span><br><span class="line">      <span class="attr">name</span>: serverData.serverName,</span><br><span class="line">      <span class="attr">content</span>: serverData.newServerContent</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  cockpit.html</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-12&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Add new Servers or blueprints!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>Server Name<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> [(<span class="attr">ngModel</span>)]=<span class="string">&quot;newServerName&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>Server Content<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> [(<span class="attr">ngModel</span>)]=<span class="string">&quot;newServerContent&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span></span></span><br><span class="line"><span class="tag">      (<span class="attr">click</span>)=<span class="string">&quot;onAddServer()&quot;</span>&gt;</span>Add Server<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span></span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span></span></span><br><span class="line"><span class="tag">      (<span class="attr">click</span>)=<span class="string">&quot;onAddBlueprint()&quot;</span>&gt;</span>Add Server Blueprint<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>  cockpit.ts</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">CockpitComponent</span> <span class="title">implements</span> <span class="title">OnInit</span> </span>&#123;</span><br><span class="line">  @Output() serverCreated = <span class="keyword">new</span> EventEmitter&lt;&#123;<span class="attr">serverName</span>:string, <span class="attr">serverContent</span>:string&#125;&gt;();</span><br><span class="line">  @Output() blueprintCreated = <span class="keyword">new</span> EventEmitter&lt;&#123;<span class="attr">serverName</span>:string, <span class="attr">serverContent</span>:string&#125;&gt;();</span><br><span class="line">  newServerName = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  newServerContent = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">ngOnInit</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">onAddServer</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">//当我们接受到click信号的时候，触发这个函数，在这个函数中将serverCreated信号发射，这样我们的app-component会接受到serverCreated信号并把新加入的server加入数组。</span></span><br><span class="line">    <span class="built_in">this</span>.serverCreated.emit(&#123;</span><br><span class="line">      <span class="attr">serverName</span>:<span class="built_in">this</span>.newServerName,</span><br><span class="line">      <span class="attr">serverContent</span>:<span class="built_in">this</span>.newServerContent</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">onAddBlueprint</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.blueprintCreated.emit(&#123;</span><br><span class="line">      <span class="attr">serverName</span>:<span class="built_in">this</span>.newServerName,</span><br><span class="line">      <span class="attr">serverContent</span>:<span class="built_in">this</span>.newServerContent    </span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>View Encapsulation<br>默认是emulated，可选的有none和native。emulated意思是css文件只对该Component起作用。</p>
</li>
<li><p>传数据的其他方式<br>Local Reference<br>我们现在使用双向绑定获取input的值，我们也可以在html元素中加入#reference_name，然后我们可以在html的其他位置引用该元素。<br>@ViewChild<br>在html使用#号标识引用，然后再ts文件中使用viewchild声明一个变量。<br><code>@ViewChild(&#39;nameInput&#39;, &#123;static: false&#125;) nameInputRef:ElementRef</code><br>后面我们就可以使用这个变量，并且它的值与html关联。<br><code>this.nameInputRef.nativeElement.value</code><br>ng-content</p>
</li>
<li><p>Lifecycle<br><img src="https://img-blog.csdnimg.cn/20190625150849439.jpg" alt="在这里插入图片描述"></p>
</li>
<li><p>More of directive<br><img src="https://img-blog.csdnimg.cn/20190625150942222.jpg" alt="在这里插入图片描述"></p>
<ul>
<li><p>basic attribute directive :</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Directive, ElementRef, OnInit &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line">@Directive(&#123;</span><br><span class="line">    <span class="attr">selector</span>:<span class="string">&#x27;[appBasicHightlight]&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">BasicHighlightDirective</span> <span class="title">implements</span> <span class="title">OnInit</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params">private elementRef:ElementRef</span>)</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    ngOnInit(): <span class="keyword">void</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.elementRef.nativeElement.style.backgroundColor = <span class="string">&#x27;green&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>better attribute directive:<br>  因为有的时候不能直接操作DOM，所以这是一个更好的方法。</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Directive, Renderer2, OnInit, ElementRef &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"></span><br><span class="line">@Directive(&#123;</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;[appBetterHighlight]&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">BetterHighlightDirective</span> <span class="title">implements</span> <span class="title">OnInit</span></span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">private elRef:ElementRef, private renderer:Renderer2</span>)</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">ngOnInit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.renderer.setStyle(<span class="built_in">this</span>.elRef.nativeElement, <span class="string">&#x27;background-color&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>responsive attribute directive:使用HostListener注解可以像jQuery一样接收到event。</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@HostListener(&#x27;mouseenter&#x27;) mouseover(eventData:Event)&#123;</span><br><span class="line">	this.renderer.setStyle(this.elRef.nativeElement, &#x27;back-ground-color&#x27;, &#x27;blue&#x27;);</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line">@HostListener(&#x27;mouseleave&#x27;) mouseleave(eventData:Event)&#123;</span><br><span class="line">	this.renderer.setStyle(this.elRef.nativeElement, &#x27;back-ground-color&#x27;, &#x27;transparent&#x27;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  以上这种responsive attribute directive还是有些麻烦，我们可以不使用renderer2而是使用@HostBinding</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">BetterHighlightDirective</span> <span class="title">implements</span> <span class="title">OnInit</span></span>&#123;</span><br><span class="line">  @HostBinding(<span class="string">&#x27;style.backgroundColor&#x27;</span>) backgroundColor:string = <span class="string">&#x27;transparent&#x27;</span>;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">private elRef:ElementRef, private renderer:Renderer2</span>)</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">ngOnInit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @HostListener(<span class="string">&#x27;mouseenter&#x27;</span>) <span class="function"><span class="title">mouseover</span>(<span class="params">eventData:Event</span>)</span>&#123;</span><br><span class="line">      <span class="comment">// this.renderer.setStyle(this.elRef.nativeElement, &#x27;back-ground-color&#x27;, &#x27;blue&#x27;);</span></span><br><span class="line">      <span class="built_in">this</span>.backgroundColor = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @HostListener(<span class="string">&#x27;mouseleave&#x27;</span>) <span class="function"><span class="title">mouseleave</span>(<span class="params">eventData:Event</span>)</span>&#123;</span><br><span class="line">      <span class="comment">// this.renderer.setStyle(this.elRef.nativeElement, &#x27;back-ground-color&#x27;, &#x27;transparent&#x27;);</span></span><br><span class="line">    <span class="built_in">this</span>.backgroundColor = <span class="string">&#x27;green&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p><strong>directive也像component一样可以进行custom binding，语法格式完全一样（在directive中新建@input成员变量），然后就可以在使用directive的时候绑定值。</strong></p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@Directive(&#123;</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;[appBetterHighlight]&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">BetterHighlightDirective</span> <span class="title">implements</span> <span class="title">OnInit</span></span>&#123;</span><br><span class="line">  @Input() defaultColor:string = <span class="string">&#x27;transparent&#x27;</span>;</span><br><span class="line">  @Input() changedColor:string = <span class="string">&#x27;blue&#x27;</span>;</span><br><span class="line">  @HostBinding(<span class="string">&#x27;style.backgroundColor&#x27;</span>) backgroundColor:string;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">private elRef:ElementRef, private renderer:Renderer2</span>)</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">ngOnInit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.backgroundColor = <span class="built_in">this</span>.defaultColor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @HostListener(<span class="string">&#x27;mouseenter&#x27;</span>) <span class="function"><span class="title">mouseover</span>(<span class="params">eventData:Event</span>)</span>&#123;</span><br><span class="line">      <span class="comment">// this.renderer.setStyle(this.elRef.nativeElement, &#x27;back-ground-color&#x27;, &#x27;blue&#x27;);</span></span><br><span class="line">      <span class="built_in">this</span>.backgroundColor = <span class="built_in">this</span>.changedColor;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @HostListener(<span class="string">&#x27;mouseleave&#x27;</span>) <span class="function"><span class="title">mouseleave</span>(<span class="params">eventData:Event</span>)</span>&#123;</span><br><span class="line">      <span class="comment">// this.renderer.setStyle(this.elRef.nativeElement, &#x27;back-ground-color&#x27;, &#x27;transparent&#x27;);</span></span><br><span class="line">    <span class="built_in">this</span>.backgroundColor = <span class="built_in">this</span>.defaultColor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;list-group&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span> <span class="attr">appBetterHighlight</span> [<span class="attr">changedColor</span>]=<span class="string">&quot;&#x27;red&#x27;&quot;</span> [<span class="attr">defaultColor</span>]=<span class="string">&quot;&#x27;pink&#x27;&quot;</span>&gt;</span></span><br><span class="line">          content</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>structural directive:<br>  Angular本身没有<em>符号，</em>符号其实是告诉Angular将*ngIf变成<code>&lt;ng-template [ngIf]&gt;&lt;/ng-template&gt;</code></p>
</li>
</ul>
</li>
</ol>
<h1 id="Service-and-Dependency-Injection"><a href="#Service-and-Dependency-Injection" class="headerlink" title="Service and Dependency Injection"></a>Service and Dependency Injection</h1><ol>
<li><p>与spring boot的dependency injection相同，angular也采用了相同的思想，所以对于我们的服务类，我们不需要去实例化他们，而是应该在需要使用该依赖的时候使用依赖注入。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Component, EventEmitter, Output &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; LoggingService &#125; <span class="keyword">from</span> <span class="string">&#x27;../logging.service&#x27;</span>;</span><br><span class="line">@Component(&#123;</span><br><span class="line">	<span class="attr">selector</span>: <span class="string">&#x27;app-new-account&#x27;</span>,</span><br><span class="line">	<span class="attr">templateUrl</span>: <span class="string">&#x27;./new-account.component.html&#x27;</span>,</span><br><span class="line">	<span class="attr">styleUrls</span>: [<span class="string">&#x27;./new-account.component.css&#x27;</span>],</span><br><span class="line">	<span class="attr">providers</span>: [LoggingService]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">NewAccountComponent</span> </span>&#123;</span><br><span class="line">	@Output() accountAdded = <span class="keyword">new</span> EventEmitter&lt;&#123;<span class="attr">name</span>: string, <span class="attr">status</span>: string&#125;&gt;();</span><br><span class="line">	<span class="function"><span class="title">constructor</span>(<span class="params">private loggingService:LoggingService</span>)</span>&#123;&#125;</span><br><span class="line">	<span class="function"><span class="title">onCreateAccount</span>(<span class="params">accountName: string, accountStatus: string</span>)</span> &#123;</span><br><span class="line">	<span class="built_in">this</span>.accountAdded.emit(&#123;</span><br><span class="line">		<span class="attr">name</span>: accountName,</span><br><span class="line">		<span class="attr">status</span>: accountStatus</span><br><span class="line">&#125;);</span><br><span class="line">	<span class="built_in">this</span>.loggingService.logStatusChange(accountStatus);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>Hierarchical Injector<br>如果在一个component中使用了依赖注入，那么这个component及它的子component都会共享同一个相同的实例。所以如果在父component和它的子component中都对同一个service进行依赖注入，那么会产生两个实例。</p>
</li>
</ol>
<p><strong>所以，如果想要在子component使用父component的实例，那么不要在providers中填写service类！</strong></p>
<ol start="3">
<li><p>如果想在一个一个依赖中注入另一个依赖，需要标注<code>@Injectable</code>,同时在appModule的provider中注明。</p>
</li>
<li><p>Injection Dependency的好处：①代码结构更清晰，分离操作与接口 ② 不再需要component之间繁琐的数据传输，数据传输都可以通过service层</p>
</li>
</ol>
<h1 id="Routing"><a href="#Routing" class="headerlink" title="Routing"></a>Routing</h1><ol>
<li>routing的基础配置<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; BrowserModule &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/platform-browser&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; NgModule &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/core&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; FormsModule &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/forms&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;./app.component&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; HomeComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;./home/home.component&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; UsersComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;./users/users.component&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ServersComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;./servers/servers.component&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; UserComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;./users/user/user.component&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; EditServerComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;./servers/edit-server/edit-server.component&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ServerComponent &#125; <span class="keyword">from</span> <span class="string">&#x27;./servers/server/server.component&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; ServersService &#125; <span class="keyword">from</span> <span class="string">&#x27;./servers/servers.service&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Routes, RouterModule &#125; <span class="keyword">from</span> <span class="string">&#x27;@angular/router&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> appRoutes: Routes = [</span><br><span class="line">	&#123;<span class="attr">path</span>: <span class="string">&#x27;users&#x27;</span>, <span class="attr">component</span>: UsersComponent&#125;,</span><br><span class="line">	&#123;<span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">component</span>: HomeComponent &#125;,</span><br><span class="line">	&#123;<span class="attr">path</span>: <span class="string">&#x27;servers&#x27;</span>, <span class="attr">component</span>: ServersComponent&#125;</span><br><span class="line">];</span><br><span class="line">@NgModule(&#123;</span><br><span class="line">	<span class="attr">declarations</span>: [</span><br><span class="line">	AppComponent,</span><br><span class="line">	HomeComponent,</span><br><span class="line">	UsersComponent,</span><br><span class="line">	ServersComponent,</span><br><span class="line">	UserComponent,</span><br><span class="line">	EditServerComponent,</span><br><span class="line">	ServerComponent</span><br><span class="line">	],</span><br><span class="line">	<span class="attr">imports</span>: [</span><br><span class="line">	BrowserModule,</span><br><span class="line">	FormsModule,</span><br><span class="line">	RouterModule.forRoot(appRoutes)</span><br><span class="line">	],</span><br><span class="line">	<span class="attr">providers</span>: [ServersService],</span><br><span class="line">	<span class="attr">bootstrap</span>: [AppComponent]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppModule</span> </span>&#123; &#125;	</span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-12 col-sm-10 col-md-8 col-sm-offset-1 col-md-offset-2&quot;</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">router-outlet</span>&gt;</span><span class="tag">&lt;/<span class="name">router-outlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>navigation:使用routerlink而不是href去进行navigation。</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;presentation&quot;</span> <span class="attr">class</span>=<span class="string">&quot;active&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> [<span class="attr">routerLink</span>]=<span class="string">&quot;[ &#x27;/&#x27; ]&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;presentation&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> [<span class="attr">routerLink</span>]=<span class="string">&quot;[ &#x27;/servers&#x27; ]&quot;</span>&gt;</span>Servers<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;presentation&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> [<span class="attr">routerLink</span>]=<span class="string">&quot;[ &#x27;/users&#x27;]&quot;</span>&gt;</span>Users<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p> 绝对路径：<code>/&lt;path&gt;</code><br> 相对路径：<code>&lt;path&gt;</code>, <code>../</code>, <code>./</code> </p>
</li>
<li><p>route active：<br><code>routerLinkActive=&quot;active&quot;</code>用于该route被选中时将会添加的active类，这里的active是bootstrap自带的active类，我们也可以写自己的active样式。<br><code>[routerLinkActiveOptions]=&quot;&#123;exact: true&#125;</code>指明是否只在绝对路径才会active。(不加这个那么点击servers和users时home也是active)</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;presentation&quot;</span> <span class="attr">routerLinkActive</span>=<span class="string">&quot;active&quot;</span> [<span class="attr">routerLinkActiveOptions</span>]=<span class="string">&quot;&#123;exact: true&#125;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> [<span class="attr">routerLink</span>]=<span class="string">&quot;[ &#x27;/&#x27; ]&quot;</span>&gt;</span>Home<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;presentation&quot;</span> <span class="attr">routerLinkActive</span>=<span class="string">&quot;active&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> [<span class="attr">routerLink</span>]=<span class="string">&quot;[ &#x27;/servers&#x27; ]&quot;</span>&gt;</span>Servers<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">li</span> <span class="attr">role</span>=<span class="string">&quot;presentation&quot;</span> <span class="attr">routerLinkActive</span>=<span class="string">&quot;active&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> [<span class="attr">routerLink</span>]=<span class="string">&quot;[ &#x27;/users&#x27;]&quot;</span>&gt;</span>Users<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>在typescipt进行routing</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@Component(&#123;</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;app-home&#x27;</span>,</span><br><span class="line">  <span class="attr">templateUrl</span>: <span class="string">&#x27;./home.component.html&#x27;</span>,</span><br><span class="line">  <span class="attr">styleUrls</span>: [<span class="string">&#x27;./home.component.css&#x27;</span>]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">HomeComponent</span> <span class="title">implements</span> <span class="title">OnInit</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">private router:Router</span>)</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">ngOnInit</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">onClickButton</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.router.navigate([<span class="string">&#x27;/servers&#x27;</span>]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> typescript的navigate函数并不像html一样知道目前的路径，所以如果我们需要相对路径，需要手动添加，也可以添加目前的activeRoute。</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@Component(&#123;</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;app-home&#x27;</span>,</span><br><span class="line">  <span class="attr">templateUrl</span>: <span class="string">&#x27;./home.component.html&#x27;</span>,</span><br><span class="line">  <span class="attr">styleUrls</span>: [<span class="string">&#x27;./home.component.css&#x27;</span>]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">HomeComponent</span> <span class="title">implements</span> <span class="title">OnInit</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">private router:Router, private activedRoute:ActivatedRoute</span>)</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">ngOnInit</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">onClickButton</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.router.navigate([<span class="string">&#x27;servers&#x27;</span>],&#123;<span class="attr">relativeTo</span>: <span class="built_in">this</span>.activedRoute&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>url parameters<br><code>&#123;path: &#39;users/:id/:name&#39;, component:UsersComponent&#125;</code><br>在typescript中使用dynamic params：ActivatedRoute是一个javascript object，里面含有active页面的很多信息。</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">UserComponent</span> <span class="title">implements</span> <span class="title">OnInit</span> </span>&#123;</span><br><span class="line">  <span class="attr">user</span>: &#123;<span class="attr">id</span>: number, <span class="attr">name</span>: string&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">private activedRouter:ActivatedRoute</span>)</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">ngOnInit</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.user = &#123;</span><br><span class="line">      <span class="attr">id</span>: <span class="built_in">this</span>.activedRouter.snapshot.params[<span class="string">&#x27;id&#x27;</span>],</span><br><span class="line">      <span class="attr">name</span>: <span class="built_in">this</span>.activedRouter.snapshot.params[<span class="string">&#x27;name&#x27;</span>]</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p> <strong>由于angular是single page application，所以它默认的行为是如果已经加载了某一route，当我们想再次进入同一route时(在一个component中再次进入该component)，angular默认不进行任何动作，所以会出现我们在某一route更新值页面不变化的情况。</strong><br> <strong>解决办法是使用<code>ActivatedRouter.params</code>这个angular预留observable来监听是否该route上有参数变化，有变化的话即发射event，我们可以监听这个event</strong></p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>User with &#123;&#123;user.id&#125;&#125; loaded.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>User name is &#123;&#123;user.name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> [<span class="attr">routerLink</span>]=<span class="string">&quot;[ &#x27;/users&#x27;, 10, &#x27;shiyu&#x27;]&quot;</span>&gt;</span>Go to shiyu page<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">UserComponent</span> <span class="title">implements</span> <span class="title">OnInit</span> </span>&#123;</span><br><span class="line">  <span class="attr">user</span>: &#123;<span class="attr">id</span>: number, <span class="attr">name</span>: string&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">private activedRouter:ActivatedRoute</span>)</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">ngOnInit</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.user = &#123;</span><br><span class="line">      <span class="attr">id</span>: <span class="built_in">this</span>.activedRouter.snapshot.params[<span class="string">&#x27;id&#x27;</span>],</span><br><span class="line">      <span class="attr">name</span>: <span class="built_in">this</span>.activedRouter.snapshot.params[<span class="string">&#x27;name&#x27;</span>]</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">this</span>.activedRouter.params.subscribe(<span class="function">(<span class="params">params:Params</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.user.id = params[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line">      <span class="built_in">this</span>.user.name = params[<span class="string">&#x27;name&#x27;</span>];</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 这里我们不需要手动在onDestroy()的时候unsubscribe，但是如果是我们自己创建的observable，那么需要unsubscribe(后面的observable章节会讲)。</p>
</li>
<li><p>query parameters<br> html中使用query parameters</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> </span></span><br><span class="line"><span class="tag">	[<span class="attr">routerLink</span>] = <span class="string">&quot;[&#x27;/servers&#x27;, 5, &#x27;edit&#x27;]&quot;</span></span></span><br><span class="line"><span class="tag">    [<span class="attr">queryParams</span>] = <span class="string">&quot;&#123; allowEdit: &#x27;1&#x27;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">    <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span></span></span><br><span class="line"><span class="tag">    *<span class="attr">ngFor</span>=<span class="string">&quot;let server of servers&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123; server.name &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p> typescript中使用query parameters</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">HomeComponent</span> <span class="title">implements</span> <span class="title">OnInit</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">private router:Router, private activedRoute:ActivatedRoute</span>)</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">ngOnInit</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">onClickButton</span>(<span class="params">id:number</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.router.navigate([<span class="string">&#x27;servers&#x27;</span>, id, <span class="string">&#x27;edit&#x27;</span>], &#123;<span class="attr">queryParams</span>:&#123;<span class="attr">allowEdit</span>: <span class="string">&#x27;1&#x27;</span>&#125;&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 使用的时候与url parameter类似：</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.activatedRouter.snapshot.queryParams);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">this</span>.activatedRouter.snapshot.fragment);</span><br><span class="line"><span class="built_in">this</span>.activatedRouter.queryParams.subscribe();</span><br><span class="line"><span class="built_in">this</span>.activatedRouter.fragment.subscribe();</span><br></pre></td></tr></table></figure></li>
<li><p>child(nested) routing<br>如果我们想要在一个页面（route）中嵌入一个子页面(route)，比如在页面上显示详细信息，而不是另起一个页面显示详细信息，这个时候我们可以使用child routing。</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> appRoutes: Routes = [</span><br><span class="line">  &#123;<span class="attr">path</span>: <span class="string">&#x27;users&#x27;</span>, <span class="attr">component</span>: UsersComponent, <span class="attr">children</span>:[</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&#x27;users/:id/:name&#x27;</span>, <span class="attr">component</span>:UserComponent&#125;</span><br><span class="line">  ]&#125;,</span><br><span class="line">  &#123;<span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">component</span>: HomeComponent &#125;,</span><br><span class="line">  &#123;<span class="attr">path</span>: <span class="string">&#x27;servers&#x27;</span>, <span class="attr">component</span>: ServersComponent, <span class="attr">children</span>: [</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&#x27;servers/:id/edit&#x27;</span>, <span class="attr">component</span> : EditServerComponent&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&#x27;servers/:id&#x27;</span>,<span class="attr">component</span>:ServerComponent&#125;]&#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p> <strong>同时在<code>users.component.ts</code>和<code>servers.component.ts</code>的想要显示详细信息的地方加入<code>&lt;router-outlet&gt;&lt;/router-outlet&gt;。</code></strong><br> 我们可以使用<code>queryParamsHandling</code>来保证子route保留（preserve）或融合（merge）父route的参数。<br> <code>this.router.navigate([&#39;edit&#39;], &#123;relativeTo:this.activitedRouter, queryParamsHandling:&#39;preserve&#39;&#125;);</code></p>
</li>
<li><p>redirect and wildcard</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> appRoutes: Routes = [</span><br><span class="line">  &#123;<span class="attr">path</span>: <span class="string">&#x27;users&#x27;</span>, <span class="attr">component</span>: UsersComponent, <span class="attr">children</span>:[</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&#x27;:id/:name&#x27;</span>, <span class="attr">component</span>:UserComponent&#125;</span><br><span class="line">  ]&#125;,</span><br><span class="line">  &#123;<span class="attr">path</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">component</span>: HomeComponent &#125;,</span><br><span class="line">  &#123;<span class="attr">path</span>: <span class="string">&#x27;servers&#x27;</span>, <span class="attr">component</span>: ServersComponent, <span class="attr">children</span>: [</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&#x27;:id/edit&#x27;</span>, <span class="attr">component</span> : EditServerComponent&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">&#x27;:id&#x27;</span>,<span class="attr">component</span>:ServerComponent&#125;</span><br><span class="line">  ]&#125;,</span><br><span class="line">  &#123;<span class="attr">path</span>: <span class="string">&#x27;not-found&#x27;</span>, <span class="attr">component</span>: NotFoundComponent&#125;,</span><br><span class="line">  &#123;<span class="attr">path</span>: <span class="string">&#x27;**&#x27;</span>, <span class="attr">redirectTo</span>: <span class="string">&#x27;/not-found&#x27;</span>&#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p> <code>**</code>必须放在最后，意思是所有为定义的route。</p>
<p> <strong>redirect问题：</strong><br> Important: Redirection Path Matching<br> In our example, we didn’t encounter any issues when we tried to redirect the user. But that’s not always the case when adding redirections.<br> By default, Angular matches paths by prefix. That means, that the following route will match both /recipes  and just /<br> { path: ‘’, redirectTo: ‘/somewhere-else’ }<br> Actually, Angular will give you an error here, because that’s a common gotcha: This route will now ALWAYS redirect you! Why?<br> Since the default matching strategy is “prefix” , Angular checks if the path you entered in the URL does start with the path specified in the route. Of course every path starts with ‘’  (Important: That’s no whitespace, it’s simply “nothing”).<br> To fix this behavior, you need to change the matching strategy to “full” :<br> { path: ‘’, redirectTo: ‘/somewhere-else’, pathMatch: ‘full’ }<br> Now, you only get redirected, if the full path is ‘’  (so only if you got NO other content in your path in this example).</p>
</li>
<li><p>route guard（144）<br>保护路径不被访问 <code>canActiveGuard</code><br>在用户离开页面前进行询问 <code>canDeactiveGuard</code><br>在component加载前获取一些数据 <code>Resolve</code>。resolve allows you load data (possibly asynchronously) BEFORE the component has been loaded. ngOnInit AFTER that happened. Both is perfectly fine, depending on your app and how you want to handle the possible “waiting time”.</p>
</li>
</ol>
<h1 id="Observables"><a href="#Observables" class="headerlink" title="Observables"></a>Observables</h1><ol>
<li><img src="https://img-blog.csdnimg.cn/20190628094921312.jpg" alt="在这里插入图片描述"></li>
<li>自己创建的observables切记要进行unsubscribe，否则会造成内存泄漏（因为observable是非同步的，所以相当于以前的进程没有杀死又开了新的进程）。 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">HomeComponent</span> <span class="title">implements</span> <span class="title">OnInit</span>, <span class="title">OnDestroy</span> </span>&#123;</span><br><span class="line">  private firstSubscription: Subscription;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123; &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">ngOnInit</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.firstSubscription = interval(<span class="number">1000</span>).subscribe(<span class="function">(<span class="params">count</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(count);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ngOnDestroy(): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.firstSubscription.unsubscribe();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>custom observable<br>如果error在complete之前发生，那么complete就不会发生，因为error之后就不再继续发射信号了。 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">HomeComponent</span> <span class="title">implements</span> <span class="title">OnInit</span>, <span class="title">OnDestroy</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  private firstObsSubscription: Subscription;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">ngOnInit</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="comment">// this.firstObsSubscription = interval(1000).subscribe(count =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//   console.log(count);</span></span><br><span class="line">    <span class="comment">// &#125;);</span></span><br><span class="line">    <span class="keyword">const</span> customIntervalObservable = Observable.create(<span class="function"><span class="params">observer</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">      <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        observer.next(count);</span><br><span class="line">        <span class="keyword">if</span> (count === <span class="number">5</span>) &#123;</span><br><span class="line">          observer.complete();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (count &gt; <span class="number">3</span>) &#123;</span><br><span class="line">          observer.error(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;Count is greater 3!&#x27;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        count++;</span><br><span class="line">      &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">this</span>.firstObsSubscription = customIntervalObservable.subscribe(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(data);</span><br><span class="line">    &#125;, <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(error);</span><br><span class="line">      alert(error.message);</span><br><span class="line">    &#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&#x27;Completed!&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ngOnDestroy(): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.firstObsSubscription.unsubscribe();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>operator<br> observable可以使用operator对数据进行操作，类似spark。 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.firstObsSubscription = customIntervalObservable.pipe(filter(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> data &gt; <span class="number">0</span>;</span><br><span class="line">&#125;), map(<span class="function">(<span class="params">data: number</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;Round: &#x27;</span> + (data + <span class="number">1</span>);</span><br><span class="line">&#125;)).subscribe(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;, <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(error);</span><br><span class="line">  alert(error.message);</span><br><span class="line">&#125;, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;Completed!&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
<li>subject</li>
</ol>
<p><strong>rxjs提供一种类似于event emitter的observable，可以在observable外部手动调用next()触发，我们可以在cross component的情况中使用subject，而放弃使用event emitter。<br>需要注意的是在@output的component交互的时候还是需要使用event emitter。所以其实就是说我们在service中使用的event emitter换成subject为好。</strong></p>
<pre><code>user.service中声明
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Injectable(&#123;<span class="attr">providedIn</span>: <span class="string">&#x27;root&#x27;</span>&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">  activatedEmitter = <span class="keyword">new</span> Subject&lt;boolean&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
user.component中触发
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">UserComponent</span> <span class="title">implements</span> <span class="title">OnInit</span> </span>&#123;</span><br><span class="line">  <span class="attr">id</span>: number;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">private route: ActivatedRoute, private userService: UserService</span>)</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">ngOnInit</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.route.params.subscribe(<span class="function">(<span class="params">params: Params</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.id = +params.id;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">onActivate</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.userService.activatedEmitter.next(<span class="literal">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
app.component中订阅，由于subject是一种特殊的observable，所以要记得unsubscribe。
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> <span class="title">implements</span> <span class="title">OnInit</span>, <span class="title">OnDestroy</span> </span>&#123;</span><br><span class="line">  userActivated = <span class="literal">false</span>;</span><br><span class="line">  private activatedSub: Subscription;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">private userService: UserService</span>)</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">ngOnInit</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.activatedSub = <span class="built_in">this</span>.userService.activatedEmitter.subscribe(<span class="function"><span class="params">didActivate</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">this</span>.userActivated = didActivate;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  ngOnDestroy(): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.activatedSub.unsubscribe();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre>
<h1 id="Forms"><a href="#Forms" class="headerlink" title="Forms"></a>Forms</h1><ol>
<li><p>Forms有两种形式，一种是angular自动根据写好的form html来生成相应的javascript object，一种是直接通过在typescript中写出html的form。<br><img src="https://img-blog.csdnimg.cn/2019062814094743.jpg" alt="在这里插入图片描述"></p>
</li>
<li><p>Template-Driven<br>在想要添加控制的html form元素上添加<code>ngModel</code>和<code>name</code>，angular即可自动识别。<br><code>&lt;input type=&quot;email&quot; id=&quot;email&quot; cclass=&quot;form-control&quot; ngModel name=&quot;email&quot;&gt;</code></p>
</li>
<li><p>使用template-driven</p>
<ul>
<li><p>使用local reference</p>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> (<span class="attr">ngSubmit</span>)=<span class="string">&quot;onSubmit(f)&quot;</span> #<span class="attr">f</span>=<span class="string">&quot;ngForm&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;user-data&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>Username<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">ngModel</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span>&gt;</span>Suggest an Username<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;email&quot;</span>&gt;</span>Mail<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">id</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">ngModel</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;secret&quot;</span>&gt;</span>Secret Questions<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;secret&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">ngModel</span> <span class="attr">name</span>=<span class="string">&quot;selection&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;pet&quot;</span>&gt;</span>Your first Pet?<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;teacher&quot;</span>&gt;</span>Your first teacher?<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li><p>使用@viewchild(viewchild其实也是获取靠获取local reference来获取该form javascipt object)，<strong>这种方式在判断form的内容是否validate的时候有用，因为是在submit前就得到了这个object。</strong></p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> </span>&#123;</span><br><span class="line">@ViewChild(<span class="string">&#x27;f&#x27;</span>, &#123;<span class="attr">static</span>: <span class="literal">false</span>&#125;) signupForm: NgForm;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">suggestUserName</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> suggestedName = <span class="string">&#x27;Superuser&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">onSubmit</span>(<span class="params">f:NgForm</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.signupForm);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>validation<br> Object的格式：</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">NgForm &#123;<span class="attr">submitted</span>: <span class="literal">true</span>, <span class="attr">_directives</span>: <span class="built_in">Array</span>(<span class="number">3</span>), <span class="attr">ngSubmit</span>: EventEmitter, <span class="attr">form</span>: FormGroup&#125;</span><br><span class="line"><span class="attr">control</span>: (...)</span><br><span class="line"><span class="attr">controls</span>: <span class="built_in">Object</span></span><br><span class="line"><span class="attr">email</span>: FormControl &#123;<span class="attr">validator</span>: ƒ, <span class="attr">asyncValidator</span>: <span class="literal">null</span>, <span class="attr">_onCollectionChange</span>: ƒ, <span class="attr">pristine</span>: <span class="literal">false</span>, <span class="attr">touched</span>: <span class="literal">true</span>, …&#125;</span><br><span class="line"><span class="attr">selection</span>: FormControl &#123;<span class="attr">validator</span>: <span class="literal">null</span>, <span class="attr">asyncValidator</span>: <span class="literal">null</span>, <span class="attr">_onCollectionChange</span>: ƒ, <span class="attr">pristine</span>: <span class="literal">true</span>, <span class="attr">touched</span>: <span class="literal">false</span>, …&#125;</span><br><span class="line"><span class="attr">username</span>: FormControl &#123;<span class="attr">validator</span>: ƒ, <span class="attr">asyncValidator</span>: <span class="literal">null</span>, <span class="attr">_onCollectionChange</span>: ƒ, <span class="attr">pristine</span>: <span class="literal">false</span>, <span class="attr">touched</span>: <span class="literal">true</span>, …&#125;</span><br><span class="line"><span class="attr">__proto__</span>: <span class="built_in">Object</span></span><br><span class="line"><span class="attr">dirty</span>: (...)</span><br><span class="line"><span class="attr">disabled</span>: (...)</span><br><span class="line"><span class="attr">enabled</span>: (...)</span><br><span class="line"><span class="attr">errors</span>: (...)</span><br><span class="line"><span class="attr">form</span>: FormGroup &#123;<span class="attr">validator</span>: <span class="literal">null</span>, <span class="attr">asyncValidator</span>: <span class="literal">null</span>, <span class="attr">_onCollectionChange</span>: ƒ, <span class="attr">pristine</span>: <span class="literal">false</span>, <span class="attr">touched</span>: <span class="literal">true</span>, …&#125;</span><br><span class="line"><span class="attr">formDirective</span>: (...)</span><br><span class="line"><span class="attr">invalid</span>: (...)</span><br><span class="line"><span class="attr">ngSubmit</span>: EventEmitter &#123;<span class="attr">_isScalar</span>: <span class="literal">false</span>, <span class="attr">observers</span>: <span class="built_in">Array</span>(<span class="number">1</span>), <span class="attr">closed</span>: <span class="literal">false</span>, <span class="attr">isStopped</span>: <span class="literal">false</span>, <span class="attr">hasError</span>: <span class="literal">false</span>, …&#125;</span><br><span class="line"><span class="attr">path</span>: (...)</span><br><span class="line"><span class="attr">pending</span>: (...)</span><br><span class="line"><span class="attr">pristine</span>: (...)</span><br><span class="line"><span class="attr">status</span>: (...)</span><br><span class="line"><span class="attr">statusChanges</span>: (...)</span><br><span class="line"><span class="attr">submitted</span>: <span class="literal">true</span></span><br><span class="line"><span class="attr">touched</span>: (...)</span><br><span class="line"><span class="attr">untouched</span>: (...)</span><br><span class="line"><span class="attr">valid</span>: (...)</span><br><span class="line"><span class="attr">value</span>: (...)</span><br><span class="line"><span class="attr">valueChanges</span>: (...)</span><br><span class="line"><span class="attr">_directives</span>: (<span class="number">3</span>) [NgModel, NgModel, NgModel]</span><br><span class="line"><span class="attr">__proto__</span>: ControlContainer</span><br></pre></td></tr></table></figure>
<p> 我们可以发现这个form object本身有包括touched，valid，value等属性，同时它也包括controls，controls中的每个control代表单一的输入字段，他也有自身的各种属性。</p>
<p> 我们可以使用前面得到的form object进行validation。<br> <code> &lt;button class=&quot;btn btn-primary&quot; type=&quot;submit&quot; [disabled]=&quot;!f.valid&quot;&gt;Submit&lt;/button&gt;</code><br> 我们也可以直接为更小的control直接添加local reference，但是这个时候我们赋给他的种类是ngModel而不是ngForm。</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;email&quot;</span>&gt;</span>Mail<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;email&quot;</span> <span class="attr">id</span>=<span class="string">&quot;email&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> <span class="attr">ngModel</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">required</span> <span class="attr">email</span> #<span class="attr">email</span>=<span class="string">&quot;ngModel&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;help-block&quot;</span> *<span class="attr">ngIf</span>=<span class="string">&quot;!email.valid&amp;&amp;email.touched&quot;</span>&gt;</span>Please enter a valid email!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p> <img src="https://img-blog.csdnimg.cn/20190628171159909.jpg" alt="在这里插入图片描述"></p>
<hr>
<p> angular会为html添加生成的object的一些css类，类如ng-invalid，ng-touchded，我们可以使用这个添加一些交互效果。以下效果是用户点击后如果不是合法的输入，边框会变红。</p>
 <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">input</span><span class="selector-class">.ng-invalid</span><span class="selector-class">.ng-touched</span>&#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>default value<br>将之前的<code>ngModel</code>改为one way binding-property binding形式，即可以设定默认值。这是很好理解的，因为我们不想让之前对这个control的输可以更改typescript中这个value的值，所以我们不使用双向绑定而是使用单向绑定。</p>
 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> [<span class="attr">ngModel</span>]=<span class="string">&quot;&#x27;initial value&#x27;&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">required</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;secret&quot;</span>&gt;</span>Secret Questions<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;secret&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> [<span class="attr">ngModel</span>]=<span class="string">&quot;&#x27;pet&#x27;&quot;</span> <span class="attr">name</span>=<span class="string">&quot;selection&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;pet&quot;</span>&gt;</span>Your first Pet?<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;teacher&quot;</span>&gt;</span>Your first teacher?<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p> 在某些特殊的情景下，我们可能需要双向绑定，比如同步实时显示输入的值。</p>
</li>
<li><p>ngModelGroup<br>我们可以使用<code>ngModelGroup</code>将多个control放到一个javascript object中。</p>
</li>
<li><p>在typescript中改变form control的值。<br>有两种方式，一种是直接在form上调用setValue()函数，作用是改变整个form；另一种是调用这个form的form.patchValue()函数，作用是overwrite 这个form的一部分。<br>reset the form: 在form上调用reset()函数，reset不止改变form的值，也会改变它的属性，比如touched、valid等。</p>
</li>
</ol>
<hr>
<ol start="8">
<li>reactive form（<strong>我们不再需要FormsModule，而是需要ReactiveFormsModule</strong>）<br>在typescript中创建formGroup对象 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">signupForm = <span class="keyword">new</span> FormGroup(&#123;</span><br><span class="line">  <span class="string">&#x27;username&#x27;</span>: <span class="keyword">new</span> FormControl(<span class="literal">null</span>),</span><br><span class="line">  <span class="string">&#x27;email&#x27;</span>: <span class="keyword">new</span> FormControl(<span class="literal">null</span>),</span><br><span class="line">  <span class="string">&#x27;gender&#x27;</span>: <span class="keyword">new</span> FormControl(<span class="string">&#x27;male&#x27;</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
 同步html from与我们在typescript中船建的formGroup的对象 <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-12 col-sm-10 col-md-8 col-sm-offset-1 col-md-offset-2&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> [<span class="attr">formGroup</span>]=<span class="string">&quot;signupForm&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>Username<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">id</span>=<span class="string">&quot;username&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span></span></span><br><span class="line"><span class="tag">            [<span class="attr">formControlName</span>]=<span class="string">&quot;&#x27;username&#x27;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;email&quot;</span>&gt;</span>email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">            <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">id</span>=<span class="string">&quot;email&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span></span></span><br><span class="line"><span class="tag">            [<span class="attr">formControlName</span>]=<span class="string">&quot;&#x27;email&#x27;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;radio&quot;</span> *<span class="attr">ngFor</span>=<span class="string">&quot;let gender of genders&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">              <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span></span></span><br><span class="line"><span class="tag">              [<span class="attr">value</span>]=<span class="string">&quot;gender&quot;</span></span></span><br><span class="line"><span class="tag">              [<span class="attr">formControlName</span>]=<span class="string">&quot;&#x27;gender&#x27;&quot;</span>&gt;</span>&#123;&#123; gender &#125;&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>reactive form validation <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">signupForm: FormGroup;</span><br><span class="line"><span class="function"><span class="title">ngOnInit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.signupForm = <span class="keyword">new</span> FormGroup(&#123;</span><br><span class="line">    <span class="string">&#x27;username&#x27;</span>: <span class="keyword">new</span> FormControl(<span class="literal">null</span>, Validators.required),</span><br><span class="line">    <span class="string">&#x27;email&#x27;</span>: <span class="keyword">new</span> FormControl(<span class="literal">null</span>, [Validators.required, Validators.email]),</span><br><span class="line">    <span class="string">&#x27;gender&#x27;</span>: <span class="keyword">new</span> FormControl(<span class="string">&#x27;male&#x27;</span>)</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>从formGroup中得到formControl<br>我们可以使用get()函数来得到formGroup中的formControl。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;form-group&quot;</span>&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>Username<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">input</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    <span class="attr">id</span>=<span class="string">&quot;username&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="xml">    [<span class="attr">formControlName</span>]=<span class="string">&quot;&#x27;username&#x27;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;help-block&quot;</span> *<span class="attr">ngIf</span>=<span class="string">&quot;!signupForm.get(&#x27;username&#x27;).valid&amp;&amp;signupForm.get(&#x27;username&#x27;).touched&quot;</span>&gt;</span>username is invalid!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
<li>Nested Form Group<br>我们可以在formGroup中嵌套更多的formGroup,这时候在html中同步要使用FormGroupName，同时我们的get函数也要做相应的改变<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> <span class="title">implements</span> <span class="title">OnInit</span></span>&#123;</span><br><span class="line">  genders = [<span class="string">&#x27;male&#x27;</span>, <span class="string">&#x27;female&#x27;</span>];</span><br><span class="line">  signupForm: FormGroup;</span><br><span class="line">  <span class="function"><span class="title">ngOnInit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.signupForm = <span class="keyword">new</span> FormGroup(&#123;</span><br><span class="line">      <span class="string">&#x27;userData&#x27;</span>: <span class="keyword">new</span> FormGroup(&#123;</span><br><span class="line">        <span class="string">&#x27;username&#x27;</span>: <span class="keyword">new</span> FormControl(<span class="literal">null</span>, Validators.required),</span><br><span class="line">        <span class="string">&#x27;email&#x27;</span>: <span class="keyword">new</span> FormControl(<span class="literal">null</span>, [Validators.required, Validators.email])</span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="string">&#x27;gender&#x27;</span>: <span class="keyword">new</span> FormControl(<span class="string">&#x27;male&#x27;</span>)</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">onSubmit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.signupForm);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;row&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-xs-12 col-sm-10 col-md-8 col-sm-offset-1 col-md-offset-2&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> [<span class="attr">formGroup</span>]=<span class="string">&quot;signupForm&quot;</span> (<span class="attr">ngSubmit</span>)=<span class="string">&quot;onSubmit()&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> [<span class="attr">formGroupName</span>]=<span class="string">&quot;&#x27;userData&#x27;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span>Username<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">              <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">id</span>=<span class="string">&quot;username&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span></span></span><br><span class="line"><span class="tag">              [<span class="attr">formControlName</span>]=<span class="string">&quot;&#x27;username&#x27;&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;help-block&quot;</span> *<span class="attr">ngIf</span>=<span class="string">&quot;!signupForm.get(&#x27;userData.username&#x27;).valid&amp;&amp;signupForm.get(&#x27;userData.username&#x27;).touched&quot;</span>&gt;</span>username is invalid!<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;email&quot;</span>&gt;</span>email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">              <span class="attr">type</span>=<span class="string">&quot;text&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">id</span>=<span class="string">&quot;email&quot;</span></span></span><br><span class="line"><span class="tag">              <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span></span></span><br><span class="line"><span class="tag">              [<span class="attr">formControlName</span>]=<span class="string">&quot;&#x27;email&#x27;&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;radio&quot;</span> *<span class="attr">ngFor</span>=<span class="string">&quot;let gender of genders&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span></span></span><br><span class="line"><span class="tag">              <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span></span></span><br><span class="line"><span class="tag">              [<span class="attr">value</span>]=<span class="string">&quot;gender&quot;</span></span></span><br><span class="line"><span class="tag">              [<span class="attr">formControlName</span>]=<span class="string">&quot;&#x27;gender&#x27;&quot;</span>&gt;</span>&#123;&#123; gender &#125;&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>Submit<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>formArray<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">formArrayName</span>=<span class="string">&quot;hobbies&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h4</span>&gt;</span>Your Hobby<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-default&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> (<span class="attr">click</span>)=<span class="string">&quot;onAddHobby()&quot;</span>&gt;</span>Add hobby<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span> *<span class="attr">ngFor</span>=<span class="string">&quot;let hobbyControl of signupForm.get(&#x27;hobbies&#x27;).controls; let i = index&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-control&quot;</span> [<span class="attr">formControlName</span>]=<span class="string">&quot;i&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> <span class="title">implements</span> <span class="title">OnInit</span></span>&#123;</span><br><span class="line">  genders = [<span class="string">&#x27;male&#x27;</span>, <span class="string">&#x27;female&#x27;</span>];</span><br><span class="line">  signupForm: FormGroup;</span><br><span class="line">  <span class="function"><span class="title">ngOnInit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.signupForm = <span class="keyword">new</span> FormGroup(&#123;</span><br><span class="line">      <span class="string">&#x27;userData&#x27;</span>: <span class="keyword">new</span> FormGroup(&#123;</span><br><span class="line">        <span class="string">&#x27;username&#x27;</span>: <span class="keyword">new</span> FormControl(<span class="literal">null</span>, Validators.required),</span><br><span class="line">        <span class="string">&#x27;email&#x27;</span>: <span class="keyword">new</span> FormControl(<span class="literal">null</span>, [Validators.required, Validators.email])</span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="string">&#x27;gender&#x27;</span>: <span class="keyword">new</span> FormControl(<span class="string">&#x27;male&#x27;</span>),</span><br><span class="line">      <span class="string">&#x27;hobbies&#x27;</span>: <span class="keyword">new</span> FormArray([])</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">onSubmit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.signupForm);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">onAddHobby</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    (&lt;FormArray&gt;<span class="built_in">this</span>.signupForm.get(<span class="string">&quot;hobbies&quot;</span>)).push(<span class="keyword">new</span> FormControl(<span class="literal">null</span>, Validators.required));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>custom validator<br>synchronized validator：<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> <span class="title">implements</span> <span class="title">OnInit</span></span>&#123;</span><br><span class="line">  genders = [<span class="string">&#x27;male&#x27;</span>, <span class="string">&#x27;female&#x27;</span>];</span><br><span class="line">  signupForm: FormGroup;</span><br><span class="line">  forbiddenUserNames = [<span class="string">&#x27;chris&#x27;</span>, <span class="string">&#x27;anna&#x27;</span>];</span><br><span class="line">  <span class="function"><span class="title">ngOnInit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.signupForm = <span class="keyword">new</span> FormGroup(&#123;</span><br><span class="line">      <span class="string">&#x27;userData&#x27;</span>: <span class="keyword">new</span> FormGroup(&#123;</span><br><span class="line">        <span class="string">&#x27;username&#x27;</span>: <span class="keyword">new</span> FormControl(<span class="literal">null</span>, [Validators.required, <span class="built_in">this</span>.forbiddenNames.bind(<span class="built_in">this</span>)]),</span><br><span class="line">        <span class="string">&#x27;email&#x27;</span>: <span class="keyword">new</span> FormControl(<span class="literal">null</span>, [Validators.required, Validators.email])</span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="string">&#x27;gender&#x27;</span>: <span class="keyword">new</span> FormControl(<span class="string">&#x27;male&#x27;</span>),</span><br><span class="line">      <span class="string">&#x27;hobbies&#x27;</span>: <span class="keyword">new</span> FormArray([])</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">onSubmit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.signupForm);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">onAddHobby</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    (&lt;FormArray&gt;<span class="built_in">this</span>.signupForm.get(<span class="string">&quot;hobbies&quot;</span>)).push(<span class="keyword">new</span> FormControl(<span class="literal">null</span>, Validators.required));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  forbiddenNames(control:FormControl):&#123;[s:string]:boolean&#125;&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">this</span>.forbiddenUserNames.indexOf(control.value) !== -<span class="number">1</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;<span class="string">&#x27;nameIsForbidden&#x27;</span>: <span class="literal">true</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
我们可以使用每个control的errors属性去查看错误信息。asynchronized validator：<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">AppComponent</span> <span class="title">implements</span> <span class="title">OnInit</span></span>&#123;</span><br><span class="line">  genders = [<span class="string">&#x27;male&#x27;</span>, <span class="string">&#x27;female&#x27;</span>];</span><br><span class="line">  signupForm: FormGroup;</span><br><span class="line">  forbiddenUserNames = [<span class="string">&#x27;chris&#x27;</span>, <span class="string">&#x27;anna&#x27;</span>];</span><br><span class="line">  <span class="function"><span class="title">ngOnInit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.signupForm = <span class="keyword">new</span> FormGroup(&#123;</span><br><span class="line">      <span class="string">&#x27;userData&#x27;</span>: <span class="keyword">new</span> FormGroup(&#123;</span><br><span class="line">        <span class="string">&#x27;username&#x27;</span>: <span class="keyword">new</span> FormControl(<span class="literal">null</span>, [Validators.required, <span class="built_in">this</span>.forbiddenNames.bind(<span class="built_in">this</span>)]),</span><br><span class="line">        <span class="string">&#x27;email&#x27;</span>: <span class="keyword">new</span> FormControl(<span class="literal">null</span>, [Validators.required, Validators.email], <span class="built_in">this</span>.forbiddenEmails)</span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="string">&#x27;gender&#x27;</span>: <span class="keyword">new</span> FormControl(<span class="string">&#x27;male&#x27;</span>),</span><br><span class="line">      <span class="string">&#x27;hobbies&#x27;</span>: <span class="keyword">new</span> FormArray([])</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">onSubmit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.signupForm);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">onAddHobby</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    (&lt;FormArray&gt;<span class="built_in">this</span>.signupForm.get(<span class="string">&quot;hobbies&quot;</span>)).push(<span class="keyword">new</span> FormControl(<span class="literal">null</span>, Validators.required));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  forbiddenNames(control:FormControl):&#123;[s:string]:boolean&#125;&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">this</span>.forbiddenUserNames.indexOf(control.value) !== -<span class="number">1</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;<span class="string">&#x27;nameIsForbidden&#x27;</span>: <span class="literal">true</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  forbiddenEmails(control:FormControl):<span class="built_in">Promise</span>&lt;any&gt; | Observable&lt;any&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>&lt;any&gt;(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(control.value ===<span class="string">&#x27;test@test.com&#x27;</span>)&#123;</span><br><span class="line">          resolve(&#123;<span class="string">&#x27;emailIsForbidden&#x27;</span>: <span class="literal">true</span>&#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          resolve(<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;, <span class="number">1500</span>);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> promise;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>formGroup自带的两个observable<br>valueChanges和statusChanges。<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.signupForm.valueChanges.subscribe(<span class="function">(<span class="params">value</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
<li>在typescript中改变form control的值<br>可以直接调用<code>formGroup.setValue()</code>, <code>formGroup.patchValue()</code>, <code>formGroup.reset()</code></li>
</ol>
<h1 id="实战经验"><a href="#实战经验" class="headerlink" title="实战经验"></a>实战经验</h1><ol>
<li><p>除了之前提到过的Component之间交流的方式，我们也可以使用@ViewChild达到在父Component中操纵子Component的目的。<br> <strong>这个本地变量方法是个简单便利的方法。但是它也有局限性，因为父组件-子组件的连接必须全部在父组件的模板中进行。父组件本身的代码对子组件没有访问权。<br> 如果父组件的类需要读取子组件的属性值或调用子组件的方法，就不能使用本地变量方法。<br> 当父组件类需要这种访问时，可以把子组件作为 ViewChild，注入到父组件里面。</strong></p>
</li>
<li><p>Getter Setter<br> ES6引入了class，以前的javascipt创建实例主要靠construcor，引入class后与java更加相似。同时ES6也保留了getter和setter。<br> getter和setter分别在使用该变量(即出现在等号右边)(变量名就是函数名)以及改变这个变量值(即出现在等号右边)的时候被调用。</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">get</span> <span class="title">prop</span>() &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">&#x27;getter&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">set</span> <span class="title">prop</span>(<span class="params">value</span>) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">&#x27;setter: &#x27;</span>+value);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> inst = <span class="keyword">new</span> MyClass();</span><br><span class="line"></span><br><span class="line">inst.prop = <span class="number">123</span>;</span><br><span class="line"><span class="comment">// setter: 123</span></span><br><span class="line"></span><br><span class="line">inst.prop</span><br><span class="line"><span class="comment">// &#x27;getter&#x27;</span></span><br></pre></td></tr></table></figure>
<p> 所以不可以出现某个类中既有XX名字的变量，也有XX名字的setter和getter，因为会造成循环。常见的做法是将某个变量替换为setter+getter，这样的好处是可以在setter中对变量进行处理。</p>
<p> 比如在angular中：</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">private _fieldJson: any;</span><br><span class="line">@Input() public <span class="keyword">set</span> <span class="title">fieldJson</span>(<span class="params">value: any</span>) &#123;</span><br><span class="line">	<span class="built_in">this</span>._fieldJson = value;</span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">this</span>.fieldJson) &#123;</span><br><span class="line">	<span class="built_in">this</span>.initField();</span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">this</span>.editObj) &#123;</span><br><span class="line">		<span class="keyword">delete</span> <span class="built_in">this</span>.editObj[<span class="string">&#x27;bindingPBRUri_name&#x27;</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">this</span>.data &amp;&amp; <span class="built_in">this</span>.editObj) &#123;</span><br><span class="line">		<span class="built_in">this</span>.editObj[<span class="string">&#x27;AssociatedGroupUris&#x27;</span>] = <span class="built_in">this</span>.data[<span class="string">&#x27;AssociatedGroupUris&#x27;</span>];</span><br><span class="line">		<span class="built_in">this</span>.editObj[<span class="string">&#x27;bindingPBRUri&#x27;</span>] = <span class="built_in">this</span>.data[<span class="string">&#x27;bindingPBRUri&#x27;</span>];</span><br><span class="line">	&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">public <span class="keyword">get</span> <span class="title">fieldJson</span>(): <span class="title">any</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">this</span>._fieldJson;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 这里其实就相当于两个变量：fieldJson和_fieldJson，我们通过@input传入的是filedJson，我们通过setter对其进行处理并保存在_fieldJson中，每当我们要使用它时，他又会自动调用getter函数，所以我们用的其实是_fieldJson。</p>
<p> <a target="_blank" rel="noopener" href="http://es6.ruanyifeng.com/#docs/class">http://es6.ruanyifeng.com/#docs/class</a></p>
</li>
</ol>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Angular/">Angular</a><a class="link-muted mr-2" rel="tag" href="/tags/Javascript/">Javascript</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2019/09/13/Basics/Hosts/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Hosts</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2019/04/29/Basics/python%E5%AD%97%E7%AC%A6%E7%BC%96%E8%A7%A3%E7%A0%81/"><span class="level-item">Python字符编解码</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-3-tablet is-3-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/images/Shiyu.jpg" alt="Shiyu Liu"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Shiyu Liu</p><p class="is-size-6 is-block">Software Developer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Nashville</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">50</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">11</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/ShiyuLiuColumbia" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/ShiyuLiuColumbia"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Linkedin" href="https://www.linkedin.com/in/shiyu-liu-6623a3158/"><i class="fab fa-linkedin"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:sl4401@columbia.edu"><i class="fas fa-envelope-open"></i></a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Basics"><span class="level-left"><span class="level-item">1</span><span class="level-item">Basics</span></span></a></li><li><a class="level is-mobile" href="#Service-and-Dependency-Injection"><span class="level-left"><span class="level-item">2</span><span class="level-item">Service and Dependency Injection</span></span></a></li><li><a class="level is-mobile" href="#Routing"><span class="level-left"><span class="level-item">3</span><span class="level-item">Routing</span></span></a></li><li><a class="level is-mobile" href="#Observables"><span class="level-left"><span class="level-item">4</span><span class="level-item">Observables</span></span></a></li><li><a class="level is-mobile" href="#Forms"><span class="level-left"><span class="level-item">5</span><span class="level-item">Forms</span></span></a></li><li><a class="level is-mobile" href="#实战经验"><span class="level-left"><span class="level-item">6</span><span class="level-item">实战经验</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Shiyu - Blog</a><p class="is-size-7"><span>&copy; 2021 Shiyu Liu</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">Visited by <span id="busuanzi_value_site_uv">0</span> users</span></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>